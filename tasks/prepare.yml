---
- name: Subscribe to rhel-7-server-cert-rpms
  become: True
  shell: subscription-manager repos --enable=rhel-7-server-cert-rpms
  when: openstack_certification_enable_rhsm_repo

- name: Copy a repository
  become: True
  copy:
    src: "{{ repo_file }}"
    dest: /etc/yum.repos.d/{{ repo_file | basename }}
  when: repo_file|default('')

- name: Install Red Hat certification packages
  become: True
  package:
    name: '{{ item }}'
    state: present
  with_items: "{{ openstack_certification_install_rpms }}"
